{{- partial "google_analytics.html" . }}
<!-- Cookie Consent Banner -->
<div id="cookie-consent" style="display: none; position: fixed; bottom: 0; left: 0; right: 0; background: var(--secondary-blue-dark); color: white; padding: 1rem; z-index: 9999;">
  <div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
    <p style="margin: 0;">
      üç™ Questo sito usa cookie tecnici e analitici. I cookie analitici richiedono il tuo consenso. 
      <a href="/privacy" style="color: var(--primary); text-decoration: underline;">Privacy Policy</a>
    </p>
    <div style="display: flex; gap: 0.5rem;">
      <button onclick="acceptCookies()" style="padding: 0.5rem 1rem; background: var(--primary); color: var(--secondary-blue-dark); border: none; border-radius: 4px; cursor: pointer; font-weight: 600;">Accetta</button>
      <button onclick="rejectCookies()" style="padding: 0.5rem 1rem; background: transparent; color: white; border: 2px solid white; border-radius: 4px; cursor: pointer;">Solo necessari</button>
    </div>
  </div>
</div>

<script>
function showCookieBanner() {
  if (!localStorage.getItem('cookie-consent')) {
    document.getElementById('cookie-consent').style.display = 'block';
  }
}

function acceptCookies() {
  localStorage.setItem('cookie-consent', 'accepted');
  document.getElementById('cookie-consent').style.display = 'none';
  // Abilita Google Analytics
  grantAnalyticsStorage();
}

function rejectCookies() {
  localStorage.setItem('cookie-consent', 'rejected');
  document.getElementById('cookie-consent').style.display = 'none';
  // Disabilita Google Analytics
  denyAnalyticsStorage();
}

window.addEventListener('load', showCookieBanner);
</script>